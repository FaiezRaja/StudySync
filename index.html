<!DOCTYPE html>
<html lang="en-GB">

    <head>
        <title>Study Sync</title> <!--Browser tab title-->

        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="stylesheet" type="text/css" href="/stylesheets/style.css">
        <link rel="stylesheet" type="text/css" href="/stylesheets/dark-theme.css">
        <link rel="stylesheet" type="text/css" href="/stylesheets/index.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

        <script src="/scripts/header.js"></script>
        <script src="/scripts/dark-theme.js"></script>
    </head>

    <header>
        <nav class="topnav" id="myTopnav">
            <a class="logo" id= "logo" href="/"><img src="/images/logo.png" /></a>
            <a href="/about">About</a>
            <a href="/login">Login</a>
            <a href="/register">Register</a>
            <a href="/login">Login</a>
            <a href="/login">Login</a>
            <a href="javascript:void(0);" class="icon" onclick="myFunction()">
                <i class="fa fa-bars"></i>
            </a>
        </nav>
    </header>

    <body>

        <p>Select your room:</p>
        <a href="/executive">Executive</a><br>
        <a href="/engineer">Engineer</a><br>

        <p>Create Rooms</p>
        <input id="input-room-name">
        <button onclick="createRoom()">Create Room</button><br>

        <script>
            const rooms = '<%= rooms %>';
            const roomsList = rooms.split(',');
            function createRoom(){
                var name = document.getElementById("input-room-name").value;
                document.body.innerHTML+= `<a href="/room?name=${name}">${name}</a><br>`;
                httpGet(name);
            }
            function httpGet(name)
            {
                if (!roomsList.includes(name)){
                    var xmlHttp = new XMLHttpRequest();
                    xmlHttp.open("GET", `/addRoom?name=${name}`, false);
                    xmlHttp.send(null);
                    return xmlHttp.responseText;
                }
                else {
                    window.alert("Room already exists");
                }
            }
            for (const name of roomsList){
                if(name!='')
                document.body.innerHTML += `<a href="/room?name=${name}">${name}</a><br>`;
            }
        </script>

        <button class="button" onclick="toggletheme()">Light | Dark</button>
    </body>

    <footer>
        <a href="/terms-and-conditions">Terms & Conditions</a>
        <a href="/privacy-policy">Privacy Policy</a>
        <a href="/about">About</a>

    </footer>

</html>